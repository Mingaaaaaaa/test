{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\MessageBoard\\\\src\\\\pages\\\\Message\\\\Message.jsx\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Message extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      messages: []\n    };\n\n    this.send = access_token => {\n      return () => {\n        var mes = this.message.value;\n        let formData = new FormData();\n        formData.append(\"access_token\", access_token);\n        formData.append(\"message\", mes);\n        formData.append(\"server_key\", '#sdf674%3255$');\n        axios.post('/message/send', formData).then(function (response) {\n          console.log(response);\n        }).catch(function (error) {\n          console.log(error);\n          console.log(\"留言失败了~\");\n        });\n        mes = '';\n      };\n    };\n  }\n\n  //组件渲染后发请求获取所有留言\n  componentDidMount() {\n    document.getElementById('login').style.display = 'none';\n    var Mes = this;\n    axios.post('/message/all', {\n      serverKey: '%23sdf674%3255$'\n    }).then(function (response) {\n      //成功后执行展示留言板界面\n      console.log('请求留言咯');\n      console.log(response); //把留言数据放到数据中\n\n      Mes.setState({\n        messages: response.data.data\n      });\n    }).catch(function (error) {\n      //获取留言失败时\n      console.log('获取留言失败了~');\n      alert('获取留言失败了~');\n    });\n  } //用户留言，发送请求函数\n\n\n  render() {\n    //获取登录界面传过来 的name 和access_token\n    const {\n      name,\n      access_token\n    } = this.props.match.params;\n    const {\n      messages\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\" MessageBoard\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 23\n        }, this), \"\\u7559\\u8A00\\u677F\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [\"Hi,\", name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: c => this.message = c,\n          placeholder: \"\\u5728\\u8FD9\\u91CC\\u8F93\\u5165\\u60F3\\u7559\\u4E0B\\u7684\\u8BDD\\u5427\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: this.send(access_token),\n          children: \"\\u53D1\\u8868\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\u7528\\u6237\\u7559\\u8A00\\u7684\\u4FE1\\u606F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 13\n          }, this), messages.map(item => {\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: [\"\\u6765\\u81EA\", item.id, \"\\u7684\\u7559\\u8A00:\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: item.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 24\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 23\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/project/MessageBoard/src/pages/Message/Message.jsx"],"names":["React","Component","axios","Message","state","messages","send","access_token","mes","message","value","formData","FormData","append","post","then","response","console","log","catch","error","componentDidMount","document","getElementById","style","display","Mes","serverKey","setState","data","alert","render","name","props","match","params","c","map","item","id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from 'axios'\r\nexport default class Message extends Component {\r\n   state={\r\n     messages:[]\r\n   }\r\n\r\n    //组件渲染后发请求获取所有留言\r\n    componentDidMount(){\r\n   document.getElementById('login').style.display='none'\r\n\r\n      var Mes=this\r\n      axios.post('/message/all', {serverKey:'%23sdf674%3255$'})\r\n      .then(function (response){\r\n          //成功后执行展示留言板界面\r\n          console.log('请求留言咯')\r\n          console.log(response);\r\n          //把留言数据放到数据中\r\n           Mes.setState({messages:response.data.data})\r\n      })\r\n      .catch(function (error) {\r\n        //获取留言失败时\r\n        console.log('获取留言失败了~')\r\n        alert('获取留言失败了~')\r\n      });\r\n  }\r\n  \r\n  //用户留言，发送请求函数\r\n  send=(access_token)=>{\r\n    return()=>{\r\n      var mes=this.message.value\r\n      let formData = new FormData()\r\n          formData.append(\"access_token\",access_token)\r\n          formData.append(\"message\",mes)\r\n          formData.append(\"server_key\",'#sdf674%3255$')\r\n      \r\n      axios.post('/message/send', formData)\r\n        .then(function (response) {\r\n          console.log( response);\r\n        })\r\n        .catch(function (error) {\r\n          console.log(error);\r\n          console.log(\"留言失败了~\");\r\n        });\r\n        mes= ''\r\n    }\r\n        \r\n}\r\n    render() {\r\n    //获取登录界面传过来 的name 和access_token\r\n    const {name,access_token}=this.props.match.params\r\n    const {messages}=this.state\r\n    \r\n    return (\r\n      <div>\r\n     <h1> MessageBoard<br></br>留言板</h1>\r\n      <h2>Hi,{name}</h2>\r\n      <div>\r\n           <input ref={c=>this.message=c} placeholder='在这里输入想留下的话吧'></input>\r\n           <button onClick={this.send(access_token)}>发表</button>\r\n\r\n           <div>\r\n            <h3>用户留言的信息</h3> \r\n            {  \r\n              messages.map( item => {\r\n                    return(\r\n                      <div>\r\n                      <h4>来自{item.id}的留言:</h4>\r\n                       <p>{item.message}</p>\r\n                       </div>\r\n                          )       \r\n                            }) \r\n\r\n            }    \r\n            </div>\r\n\r\n      </div>\r\n  \r\n      </div>\r\n    )\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}